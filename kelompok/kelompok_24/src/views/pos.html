<!-- src/views/pos.html -->

<div class="flex flex-col lg:flex-row h-[calc(100vh-8rem)] gap-6 overflow-hidden">

    <!-- === LEFT PANEL: MENU SELECTION === -->
    <div class="flex-1 flex flex-col min-h-0">
        
        <!-- Category Tabs (Tactical Style) -->
        <div id="category-tabs-container" class="flex items-center gap-2 mb-4 overflow-x-auto pb-2 scrollbar-hide">
            <!-- Dynamic Category Tabs -->
        </div>

        <!-- Menu Grid (Scrollable) -->
        <div id="menu-grid-container" class="flex-1 overflow-y-auto pr-2 grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 pb-20">
            <!-- Dynamic Menu Cards -->
        </div>
    </div>

    <!-- === RIGHT PANEL: CART / STRUK === -->
    <div class="w-full lg:w-96 bg-warkops-panel border border-white/10 flex flex-col shadow-2xl relative">
        <!-- Background Pattern -->
        <div class="absolute inset-0 bg-dots opacity-20 pointer-events-none"></div>

        <!-- Header Cart -->
        <div class="p-4 border-b border-white/10 bg-black/20 flex justify-between items-center z-10">
            <div>
                <div class="text-[10px] text-warkops-muted font-mono uppercase tracking-widest">Transaction #<span id="trx-number">TRX-0000</span></div>
                <div class="text-sm font-display font-bold text-white">CURRENT ORDER</div>
            </div>
            <div class="w-2 h-2 bg-warkops-success rounded-full animate-pulse"></div>
        </div>

        <!-- Cart Items (Scrollable) -->
        <div id="cart-items-container" class="flex-1 overflow-y-auto p-4 space-y-3 z-10">
            <!-- Dynamic Cart Items -->
            <div class="text-center py-10">
                <div class="text-warkops-muted font-mono text-xs mb-2">KERANJANG KOSONG</div>
                <div class="text-[10px] text-white/30">Pilih menu untuk memulai transaksi</div>
            </div>
        </div>

        <!-- Totals Section -->
        <div class="p-4 bg-white/5 border-t border-white/10 z-10 space-y-2">
            <div class="flex justify-between text-xs text-warkops-muted font-mono">
                <span>SUBTOTAL</span>
                <span>Rp <span id="subtotal-display">0</span></span>
            </div>
            <div class="flex justify-between text-xs text-warkops-muted font-mono">
                <span>TAX (10%)</span>
                <span>Rp <span id="tax-display">0</span></span>
            </div>
            <div class="flex justify-between items-end pt-2 border-t border-dashed border-white/10 mt-2">
                <span class="text-sm font-display font-bold text-white">TOTAL</span>
                <span class="text-xl font-mono font-bold text-warkops-primary tracking-tight">Rp <span id="total-display">0</span></span>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="p-4 grid grid-cols-2 gap-3 z-10">
            <button id="clear-cart-btn" class="py-3 border border-white/10 text-xs font-mono text-warkops-muted hover:text-white hover:bg-white/5 transition uppercase tracking-wider">
                Clear
            </button>
            <button id="process-order-btn" class="py-3 bg-warkops-primary text-black font-display font-black text-sm uppercase tracking-wide hover:brightness-110 shadow-[0_0_20px_rgba(244,63,94,0.4)] transition-all disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                PROCESS >
            </button>
        </div>
    </div>

</div>

<!-- === PAYMENT MODAL === -->
<div id="modal-payment" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-warkops-panel border border-warkops-primary/50 max-w-md w-full shadow-[0_0_50px_rgba(244,63,94,0.3)] relative">
        
        <!-- Modal Header -->
        <div class="bg-gradient-to-r from-warkops-primary/20 to-transparent border-b border-white/10 p-4 flex items-center justify-between">
            <div>
                <div class="text-[10px] text-warkops-muted font-mono uppercase tracking-widest">Payment Processing</div>
                <div class="font-display font-bold text-white text-lg">FINALIZE TRANSACTION</div>
            </div>
            <button id="close-payment-modal" class="w-8 h-8 flex items-center justify-center border border-white/10 hover:border-red-500 hover:text-red-400 text-white transition-colors">
                <span class="text-xl leading-none">Ã—</span>
            </button>
        </div>

        <!-- Modal Body -->
        <form id="form-payment" class="p-6 space-y-4">
            
            <!-- Total Display -->
            <div class="bg-black/40 border border-warkops-primary/30 p-4 text-center">
                <div class="text-[10px] text-warkops-muted font-mono mb-1">TOTAL PEMBAYARAN</div>
                <div class="text-3xl font-mono font-black text-warkops-primary tracking-tight">Rp <span id="final-total-display">0</span></div>
            </div>

            <!-- Payment Amount Input -->
            <div>
                <label class="block text-[10px] text-warkops-muted font-mono uppercase mb-2">Jumlah Dibayar</label>
                <input 
                    type="number" 
                    id="payment-amount" 
                    name="payment" 
                    required 
                    min="0" 
                    step="1000"
                    class="w-full bg-black/30 border border-white/10 focus:border-warkops-primary px-4 py-3 text-white font-mono text-lg outline-none transition-colors"
                    placeholder="0"
                >
            </div>

            <!-- Change Display -->
            <div class="bg-warkops-success/10 border border-warkops-success/30 p-4">
                <div class="text-[10px] text-warkops-success font-mono mb-1">KEMBALIAN</div>
                <div class="text-2xl font-mono font-bold text-warkops-success">Rp <span id="change-amount-display">0</span></div>
            </div>

            <!-- Table Number Input -->
            <div>
                <label class="block text-[10px] text-warkops-muted font-mono uppercase mb-2">Nomor Meja (Optional)</label>
                <input 
                    type="text" 
                    id="table-no" 
                    name="table_no" 
                    class="w-full bg-black/30 border border-white/10 focus:border-warkops-secondary px-4 py-2 text-white font-mono outline-none transition-colors"
                    placeholder="Contoh: A12"
                >
            </div>

            <!-- Notes Textarea -->
            <div>
                <label class="block text-[10px] text-warkops-muted font-mono uppercase mb-2">Catatan (Optional)</label>
                <textarea 
                    id="payment-note" 
                    name="note" 
                    rows="2" 
                    class="w-full bg-black/30 border border-white/10 focus:border-warkops-accent px-4 py-2 text-white font-mono text-sm outline-none resize-none transition-colors"
                    placeholder="Tambahkan catatan..."
                ></textarea>
            </div>

            <!-- Submit Button -->
            <button 
                type="submit" 
                class="w-full py-4 bg-warkops-primary text-black font-display font-black text-base uppercase tracking-wide hover:brightness-110 shadow-[0_0_20px_rgba(244,63,94,0.5)] transition-all"
            >
                CONFIRM PAYMENT
            </button>
        </form>

    </div>
</div>

<div id="modifier-modal" class="fixed inset-0 z-[99] hidden flex items-center justify-center bg-black/90 backdrop-blur-sm transition-opacity duration-300">
    <div class="bg-warkops-panel border border-white/10 w-full max-w-md p-6 shadow-2xl relative animate-slide-up transform transition-all">
        
        <div class="border-b border-white/10 pb-4 mb-4">
            <h3 class="font-mono text-xs text-warkops-muted uppercase tracking-widest mb-1">CUSTOMIZE ORDER</h3>
            <h2 id="modal-item-name" class="font-display font-bold text-2xl text-white leading-none">...</h2>
            <div id="modal-base-price" class="font-mono text-warkops-primary text-sm mt-1">Rp 0</div>
        </div>
        
        <div class="mb-6">
            <div class="text-[10px] text-warkops-muted font-mono uppercase mb-3">ADD-ONS (OPTIONAL)</div>
            <div id="modal-modifiers-list" class="space-y-2 max-h-60 overflow-y-auto pr-2 custom-scrollbar">
                <div class="text-xs text-warkops-muted animate-pulse">Loading toppings...</div>
            </div>
        </div>

        <div class="flex justify-between items-center mb-6 bg-black/40 p-3 border border-white/5">
            <span class="text-xs font-mono text-warkops-muted">ESTIMATED TOTAL</span>
            <span id="modal-total-price" class="text-lg font-bold text-white font-mono">Rp 0</span>
        </div>

        <div class="flex gap-3">
            <button id="btn-cancel-mod" class="flex-1 py-3 border border-white/10 text-warkops-muted hover:text-white hover:bg-white/5 font-mono text-xs uppercase tracking-wider transition-all">
                CANCEL
            </button>
            <button id="btn-confirm-mod" class="flex-1 py-3 bg-warkops-primary text-black font-display font-black text-sm uppercase tracking-wide hover:brightness-110 shadow-[0_0_15px_rgba(244,63,94,0.4)] transition-all">
                ADD TO CART
            </button>
        </div>

    </div>
</div>